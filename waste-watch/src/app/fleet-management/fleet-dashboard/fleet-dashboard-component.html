<div class="dashboard-container">
  <app-side-nav></app-side-nav>

  <div class="main-content">
    <div class="dashboard-header">
      <h1>
        <fa-icon [icon]="faTruck"></fa-icon>
        {{ 'FLEET_DASHBOARD.TITLE' | translate }}
      </h1>
    </div>

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-header">
          <fa-icon [icon]="faTruck"></fa-icon>
          <h3>{{ 'FLEET_DASHBOARD.ACTIVE_TRUCKS' | translate }}</h3>
        </div>
        <div class="stat-value">{{ activeTrucks }}</div>
      </div>

      <div class="stat-card">
        <div class="stat-header">
          <fa-icon [icon]="faGasPump"></fa-icon>
          <h3>{{ 'FLEET_DASHBOARD.AVG_FUEL_EFFICIENCY' | translate }}</h3>
        </div>
        <div class="stat-value">{{ fuelEfficiency }}</div>
      </div>

      <div class="stat-card">
        <div class="stat-header">
          <fa-icon [icon]="faExclamationTriangle"></fa-icon>
          <h3>{{ 'FLEET_DASHBOARD.NEARING_CAPACITY' | translate }}</h3>
        </div>
        <div class="stat-value">{{ nearingCapacity }}</div>
      </div>
    </div>

    <div class="collections-section">
      <div class="collections-header">
        <h3>{{ 'FLEET_DASHBOARD.TODAYS_COLLECTIONS' | translate }}</h3>
        <div class="collections-stats">
          <span class="collections-value">{{ todayCollections }}</span>
          <span class="collections-trend" [class.positive]="collectionTrend > 0">
            {{ collectionTrend }}%
            <fa-icon [icon]="faChartLine"></fa-icon>
          </span>
          <span class="collections-comparison">
            {{ 'FLEET_DASHBOARD.COLLECTION_TREND' | translate }}
          </span>
        </div>
      </div>

      <!-- Chart Grid Container -->
      <div class="chart-grid">
        <div class="chart-container">
          <h4>{{ 'FLEET_DASHBOARD.MONTHLY_OVERVIEW' | translate }}</h4>
          <canvas #barChart></canvas>
        </div>
        <div class="chart-container">
          <h4>{{ 'FLEET_DASHBOARD.MONTHLY_BREAKDOWN' | translate }}</h4>
          <canvas #pieChart></canvas>
        </div>
      </div>
    </div>

    <div class="alerts-section">
      <h3>{{ 'FLEET_DASHBOARD.ACTIVE_ALERTS' | translate }}</h3>
      <div class="alerts-container">
        <div *ngFor="let alert of activeAlerts"
             class="alert-card"
             [class.critical]="alert.type === 'Critical'"
             [class.warning]="alert.type === 'Warning'">
          <div class="alert-header">
            <fa-icon [icon]="faTools"></fa-icon>
            <span class="alert-type">
              {{ 'FLEET_DASHBOARD.ALERT_TYPE.' + alert.type.toUpperCase() | translate }}
            </span>
          </div>
          <h4>{{ alert.message }}</h4>
          <p>{{ alert.details }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
